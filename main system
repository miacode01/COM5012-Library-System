#include <iostream>
#include <vector>
#include <string>
using namespace std;

class Book {
  public:
  int id;
  string title;
  string author;
  bool isAvailable;

  Book (string t, string a) {
    title  = t;
    author = a;
    isAvailable = true;
  }

void display() {
  cout <<"Title" <<title
  <<"| Author" <<author
  <<(isAvailable ? "Available" : "Borrowed")
  <<endl;
}
};

class User {
  protected:
  string username;
  string password;

  public:
  User (string u, string p) {
    username = u;
    password = p;
  }
  string getUsername() {
    return username;
  }
  bool login(string u, string p) {
    return (username == u && password == p);
  }
};

class Member : public User {
  public:
  Member (string u, string p) : User(u,p) {}
  void borrowBook(vector<Book>& books, string title) {
    for (auto &book: books) {
      if (book.title == title && book.isAvailable) {
        cout << "Book borrowed successfully!\n";
        return;
      }
    }
  cout << "Book not available.\n";
}
void returnBook(vector<Book>& books, string title) {
  for (auto &book : books) {
  if (book.title == title && book.isAvailable) {
    book.isAvailable = true;
    cout << "Book returned successfully!\n";
    return;
  }
  }
  cout << "Invalid return.\n";
}

};

class Librarian : public User {
  public:
  Librarian(string u, string p) : User(u,p) {}
  void addBook(vector<Book>& books, string title, string author) {
    books.push_back(Book(title,author));
    cout << "Book added successfully!\n";

  }
  void removeBook(vector<Book>& books, string title) {
    for (int i = 0; i <books.size(); i++) {
      if (books[i].title == title) {
        books.erase(books.begin() + i);
        cout << "Book removed successfully!\n";
        return;
      }
    }
    cout <<"Book not found.\n";
  }
};

class Admin: public User {
  public:
  Admin(string u, string p) : User(u,p) {}
  void addMember(vector<Member>& members, string u, string p) {
    members.push_back(Member(u,p));
    cout <<"Member created successfully!\n";
  }
  void addLibrarian(vector<Librarian>& librarians, string u, string p) {
    librarians.push_back(Librarian(u,p));
    cout << "Librarian created successfully.\n";
  }
};

int main() {
  vector<Book> books;
  vector<Member> members;
  vector<Librarian> librarians;

  Admin admin("admin","2026");

  int choice;
  do {
    cout << "\n====Smart Library System====\n";
    cout <<"1. Admin Login\n";
    cout <<"2. Librarian\n";
    cout << "3. User login\n";
    cout <<"0.Exit\n";
    cin >> choice;

    if (choice ==1) {
      string u, p;
      cout << "Username";
      cin >> u;
      cout <<"Password";
      cin >> p;

    if (admin.login(u,p)) {
      int adminChoice;
      cout <<"1.Add User\n2. Add Librarian\n";
      cin >> adminChoice;

      if (adminChoice ==1) {
        string u, p;
        cout <<"New Username";
        cin >> u;
        cout <<"New Password";
        cin >> p;
        admin.addMember(members, u, p);
      }
      else if (adminChoice ==2) {
        string u, p;
        cout <<"New Username";
        cin >> u;
        cout <<"New Password";
        cin >> p;
        admin.addLibrarian(librarians, u, p);
      }
    } else {
      cout <<"Invalid Admin Login\n";
    }
    }
  } while (choice !=0);

  return 0;

}

